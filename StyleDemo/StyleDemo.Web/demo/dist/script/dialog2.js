!function(){function t(e,t){var o,n,a,i=Array.prototype.slice;return"string"==typeof t&&(o=e[t],t=e,e=o),n=i.call(arguments,2),a=function(){return e.apply(t,n.concat(i.call(arguments)))}}function o(e){var t,o=this;t=document.createElement("div"),t.className="page_mask",t.style.cssText="top: 0px; left: 0px;filter: alpha(opacity=50);position: fixed; width: 0; height: 0; opacity: 0.5; background-color:#333;display:none;",t.style.zIndex=o.zIndexObj.mask,t.innerHTML='<iframe style="filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1" src="about:blank" frameborder="0"></iframe><div style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1;">&nbsp;</div>',document.body.appendChild(t),o.pageMask=t,$(t).on("click",o.eventHand)}function n(){var e=this,t=$(window);e.pageMask&&(e.pageMask.style.height=t.height()+"px",e.pageMask.style.width=t.width()+"px")}function a(e,t,o,n){var a=($(window).width(),$(o).outerWidth()),i=$(o).outerHeight(),l=$(window).height(),s=$(document).width();if($(document).height(),t.relative){var r=$(t.relative);return offset_=r.offset(),e.left=offset_.left+(t.left||0)+"px",void(e.top=offset_.top+r.height()+(t.top||0)+"px")}t.pageWidth&&t.left?e.left=t.left+(s-t.pageWidth)/2+"px":e.left=(s-a)/2+"px",e.top=(t.top||(t.fixed?0:$(document).scrollTop())+(l-i)/2)+"px"}function i(){var e=this,t=e._options;t.isModal!==!1&&o.call(e);var n=document.createElement("div");n.className="dialog-ui "+(t.className||""),e.elem=n,e._elem=$(n);var a="position:"+(t.fixed?"fixed":"absolute")+";left:0;top:0;z-index:"+e.zIndexObj.content+";display:none;";t.width&&(a+="width:"+t.width+"px;"),t.height&&(a+="height:"+t.height+"px;"),n.style.cssText=a;var i="";t.title&&(i='<div class="dialog-title"><p>'+t.title+'</p></div><span class="close-dialog-btn"></span>'),i+='<div class="dialog-content"></div>',n.innerHTML=i,e.conElem=$(".dialog-content",n)[0],"object"!=typeof t.content&&r.call(e),document.body.appendChild(n)}function l(e){var t=this,o=t._options,n=t.elem.style;(!e||o.fixed||o.relative)&&"none"!==n.display&&a(n,o,t.elem)}function s(e){var t,o=this,a=e.target,i=a,s=o._options;switch(e.type){case"scroll":l.call(o);break;case"resize":l.call(o),n.call(o);break;case"click":for(;i!==o.pageMask&&i!==o.elem&&i!==document&&i!==document.body;)i=i.parentNode;if(i===o.pageMask&&s.bgClose)return void o.close();if($(a).hasClass("close-dialog-btn")){if(s.closeFn&&(t=s.closeFn,t.apply(o,[o])===!1))return;o.close()}else i===o.elem&&"function"==typeof s.click&&s.click.apply(o,[o,a]);break;case"mousedown":e.preventDefault(e),e.stopPropagation(e);var r=o._elem.offset();o.dragable.mdown=!0,o.dragable.moveLeft=e.clientX-r.left,o.dragable.moveTop=e.clientY-r.top;break;case"mousemove":if(!o.dragable.mdown)return;var c=$(document),d=$(window),p=d.height(),f=c.width(),m=o._elem.outerWidth(),u=o._elem.outerHeight(),g=e.clientX-o.dragable.moveLeft,h=e.clientY-o.dragable.moveTop;g=0>=g?0:g>f-m?f-m:g,h=0>=h?0:h>p+d.scrollTop()-u?p+d.scrollTop()-u:h,o._elem.css({left:g+"px",top:h+"px"});break;case"mouseup":e.preventDefault(e),e.stopPropagation(e),o.dragable.mdown=!1}}function r(){var e=this,t=e._options;if("string"==typeof t.content)e.conElem.innerHTML=t.content;else if(/object/i.test(typeof t.content)){var o="1"==t.content.nodeType?t.content:t.content[0];if(o.parentNode===e.conElem)return;o.style.display&&o.setAttribute("data-original-display",o.style.display),o.style.display="block",e.recordParent=o.parentNode,e.recordPoint=o.nextSibling,t.content=o,e.conElem.appendChild(t.content)}}function c(o){var n=this;if(n.zIndexObj=p,o.zIndex)switch(Object.prototype.toString.call(o.zIndex)){case"[object Array]":2===o.zIndex.length?(n.zIndexObj.mask=o.zIndex[1],n.zIndexObj.content=o.zIndex[0]):e.zIndexObj.content=o.zIndex[0];break;case"[object Number]":case"[object String]":n.zIndexObj.content=parseInt(o.zIndex,10)}var a=$.extend({fixed:!0,title:!1,isModal:!0},o);n._options=a,n.eventHand=t(s,n),i.call(n),"function"==typeof a.click&&n._elem.on("click",n.eventHand),a.dragable&&(n.dragable={},n._elem.on("mousedown mousemove mouseup",n.eventHand),$(document).on("mouseup",n.eventHand)),a.autoOpen&&n.show()}function d(){var e=this,t=e._options.content;if(e.recordParent){e.recordParent.insertBefore(t,e.recordPoint);var o=t.getAttribute("data-original-display");o?t.style.display=o:t.style.display="",e.recordParent=e.recordParent=null}}var p={mask:9e3,content:9001};c.prototype.content=function(e){e&&(d.call(me),opts.content=e)},c.prototype.show=function(e){var t=this,o=t._options;o.beforeOpen&&o.beforeOpen.call(t)===!1||(e&&(d.call(t),o.content=e),o.transition,t.elem.style.display="block",t.pageMask&&(t.pageMask.style.display="block"),r.call(t),n.call(t),a(t.elem.style,t._options,t.elem,!0),$(window).on("resize",t.eventHand),o.fixed&&$(window).on("scroll",t.eventHand))},c.prototype.close=function(){var e=this,t=e._options;("function"!=typeof t.beforeClose||t.beforeClose.call(e)!==!1)&&(e.elem.style.display="none",e.pageMask&&(e.pageMask.style.display="none"),d.call(e),"function"==typeof e.afterClose&&e.afterClose(),$(window).off("resize scroll",e.eventHand))},c.prototype.destroy=function(){var e=this;$(window).off("resize scroll",e.eventHand),e._elem.off("click",e.eventHand),e.elem.parentNode.removeChild(e.elem),e.pageMask&&(e.pageMask.parentNode.removeChild(e.pageMask),$(e.pageMask).off("click",e.eventHand))},$.dialog=function(e){return new c(e)}}();