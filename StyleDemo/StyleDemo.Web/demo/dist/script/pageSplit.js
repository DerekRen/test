!function(){function t(t,s){if(this.elem=$(t),$.extend(this,r,s),"undefined"==typeof this.current&&(this.current=$.parseParam(location.search.substring(1),this.pageNoParam)),"string"==typeof this.current&&(this.current=parseInt(this.current)),"undefined"==typeof this.current||isNaN(this.current)||this.current<1?this.current=1:void 0!==this.total&&this.current>this.total&&(this.current=this.total),this.skinText||(this.skinText=u[this.skin]),this.ajaxObj&&this.initLoad){var e=this.ajaxObj.success,i=this;this.ajaxObj.success=function(t){e(t,i),0===$(".water-page",i.elem).length&&a.call(i)},this.turn(this.current)}else a.call(this)}function a(){var t=this.total;if(1===t)return void this.elem.html("");var a='<ul class="water-page water-page-'+this.skin+'"><li>'+e.call(this)+"</li>";this.needJump?(a+=i.call(this)+"</ul>",this.elem.html(a),n.call(this)):(a+="</ul>",this.elem.html(a)),s.call(this)}function s(){var t=this;$("li:first-child",this.elem).delegate("a","click",function(){var a=$(this);a.hasClass("current")||a.hasClass("disabled")||(a.hasClass("turn-prev")?t.prev():a.hasClass("turn-next")?t.next():t.turn(parseInt(a.attr("data-num"))))})}function e(){var t=this.total,a=this.current,s=1,e=t,i="",n="";for(t>7&&(4>=a?(e=6,n='<span class="ellipsis">...</span><a href="javascript:;" data-num="'+t+'">'+t+"</a>"):4>e-a?(s=e-5,i='<a href="javascript:;" data-num="1">1</a><span class="ellipsis">...</span>'):(i='<a href="javascript:;" data-num="1">1</a><span class="ellipsis">...</span>',s=a-2,e=a+2,n='<span class="ellipsis">...</span><a href="javascript:;" data-num="'+t+'">'+t+"</a>"));e>=s;s++)i+="<a "+(s===a?'class="current" ':"")+'href="javascript:;" data-num="'+s+'">'+s+"</a>";return i+=n,i='<a class="turn-prev'+(1===a?" disabled":"")+'" href="javascript:;">'+this.skinText.prev+"</a>"+i,i+='<a class="turn-next'+(a===t?" disabled":"")+'" href="javascript:;">'+this.skinText.next+"</a>",this.needFirstAndLast&&(i='<a class="first-page'+(1===a?" disabled":"")+'" href="javascript:;" data-num="1">'+this.skinText.first+"</a>"+i+'<a class="last-page'+(a===t?" disabled":"")+'" href="javascript:;" data-num="'+t+'">'+this.skinText.last+"</a>"),i}function i(){return'<li class="jump-wrapper"><span>'+this.skinText.jumpInputBefore+'</span><input value="'+this.current+'" /><span>'+this.skinText.jumpInputAfter+'</span><button type="button">'+this.skinText.jumpButton+"</button></li>"}function n(){var t=this;$(".jump-wrapper input",t.elem).on("keyup",function(){if("-"!==this.value){var a=parseInt(this.value);1>a?this.value=1:this.value>t.total?this.value=t.total:isNaN(a)?this.value="":this.value=a}}),$(".jump-wrapper button",t.elem).on("click",function(){var a=parseInt($(".jump-wrapper input",t.elem).val());a!==t.current&&t.turn(a)})}$.fn.page=function(a){var s=[];switch(this.each(function(e,i){s.push(new t(i,a))}),s.length){case 0:return;case 1:return s[0];default:return s}};var r={pageNoParam:"pageNo",initLoad:!0,skin:"wide",needJump:!0},u={wide:{prev:"",next:"",jumpInputBefore:"跳转到",jumpInputAfter:"",jumpButton:"GO"},green:{first:"首页",last:"末页",prev:"上一页",next:"上一页",jumpInputBefore:"第",jumpInputAfter:"页",jumpButton:"跳转"}};t.prototype.buildUrl=function(t){var a=new RegExp("([?&]"+this.pageNoParam+"=)\\d+");return a.test(t)?t.replace(a,"$1"+this.current):t+(-1===t.indexOf("?")?"?":"&")+this.pageNoParam+"="+this.current},t.prototype.buildAjaxObj=function(){"POST"===this.ajaxObj.type?this.ajaxObj.data[this.pageNoParam]=this.current:this.ajaxObj.url=this.buildUrl(this.ajaxObj.url)},t.prototype.turn=function(t){1>t||"undefined"!=typeof this.total&&t>this.total||(this.current=t,$(".jump-wrapper input",this.elem).val(this.current),this.ajaxObj?($("li:first-child",this.elem).html(e.call(this)),this.buildAjaxObj(),$.ajax(this.ajaxObj)):location.href=this.buildUrl(location.href))},t.prototype.prev=function(){this.turn(this.current-1)},t.prototype.next=function(){this.turn(this.current+1)}}();